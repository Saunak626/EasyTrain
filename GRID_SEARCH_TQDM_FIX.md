# ç½‘æ ¼æœç´¢ tqdm è¿›åº¦æ¡ä¿®å¤æ€»ç»“

## ğŸ¯ é—®é¢˜æè¿°

ç”¨æˆ·å‘ç°å½“å‰ç½‘æ ¼æœç´¢ä¸­æ¯ä¸ªepochæ²¡æœ‰æ˜¾ç¤ºtqdmè¿›åº¦æ¡ï¼Œè€Œæ˜¯ç›´æ¥æ˜¾ç¤ºepochç»“æœã€‚è¿™æ˜¯å› ä¸ºåœ¨ç½‘æ ¼æœç´¢ä¸­ï¼Œsubprocessè°ƒç”¨train.pyæ—¶ï¼Œtqdmçš„è¾“å‡ºè¢«`capture_output=True`æ•è·äº†ï¼Œæ²¡æœ‰å®æ—¶æ˜¾ç¤ºã€‚

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹å‰çš„é—®é¢˜
```python
# ä¹‹å‰çš„ä»£ç ä¼šæ•è·æ‰€æœ‰è¾“å‡ºï¼Œå¯¼è‡´tqdmè¿›åº¦æ¡ä¸æ˜¾ç¤º
result = subprocess.run(cmd, capture_output=True, text=True, timeout=300)
```

### ä¿®å¤åçš„è§£å†³æ–¹æ¡ˆ
```python
# ä½¿ç”¨Popenå®æ—¶æ˜¾ç¤ºè¾“å‡ºï¼ŒåŒ…æ‹¬tqdmè¿›åº¦æ¡
process = subprocess.Popen(
    cmd, 
    stdout=subprocess.PIPE, 
    stderr=subprocess.STDOUT,
    text=True,
    bufsize=1,
    universal_newlines=True
)

# å®æ—¶è¯»å–å¹¶æ˜¾ç¤ºè¾“å‡ºï¼Œæ˜¾ç¤ºtqdmè¿›åº¦æ¡
for line in iter(process.stdout.readline, ''):
    if line:
        all_output.append(line)
        line_content = line.strip()
        
        # æ˜¾ç¤ºå…³é”®è®­ç»ƒä¿¡æ¯å’Œè¿›åº¦æ¡
        if any(keyword in line_content for keyword in [
            "è®­ç»ƒå®éªŒ:", "æ•°æ®é›†:", "æ¨¡å‹:", "å‚æ•°:", 
            "Epoch", "Test Loss:", "Accuracy:", "æ–°æœ€ä½³å‡†ç¡®ç‡:",
            "è®­ç»ƒå®Œæˆ!", "swanlab:", "View project", "View run",
            "è®­ç»ƒå®Œæˆä¿¡æ¯", "å®éªŒåç§°:", "è¶…å‚æ•°:", "è®­ç»ƒç¯å¢ƒ:", "GPUè®¾å¤‡:", "åˆ†å¸ƒå¼ä¿¡æ¯:"
        ]):
            print(f"[{exp_name}] {line.rstrip()}")
        
        # æ˜¾ç¤ºtqdmè¿›åº¦æ¡ï¼ˆåŒ…å«Trainingå’ŒTestingï¼‰
        elif ("Training:" in line_content or "Testing:" in line_content) and ("%" in line_content):
            # ä½¿ç”¨\ræ¥å®ç°åŒè¡Œåˆ·æ–°æ•ˆæœ
            print(f"\r[{exp_name}] {line.rstrip()}", end='', flush=True)
            # å¦‚æœæ˜¯å®Œæˆçš„è¿›åº¦æ¡ï¼Œæ¢è¡Œ
            if "100%" in line_content or line_content.endswith("batch/s]"):
                print()  # æ¢è¡Œ
```

## ğŸš€ ä¿®å¤æ•ˆæœ

### ç°åœ¨çš„æ˜¾ç¤ºæ•ˆæœ
```
============================================================
ğŸš€ å¼€å§‹å®éªŒ 001: grid_001
ğŸ“‹ å‚æ•°: {'learning_rate': 0.001, 'batch_size': 64, 'dropout': 0.1, 'epochs': 5, 'model_type': 'resnet18'}
============================================================
[grid_001] === è®­ç»ƒå®éªŒ: grid_001 ===
[grid_001] æ•°æ®é›†: cifar10
[grid_001] æ¨¡å‹: resnet18
[grid_001] å‚æ•°: {'learning_rate': 0.001, 'batch_size': 64, 'epochs': 5, 'dropout': 0.1}
[grid_001] Epoch 1/5
[grid_001] Epoch 1 Training:   0%|          | 0/782 [00:00<?, ?batch/s]
[grid_001] Epoch 1 Training:   6%|â–‹         | 50/782 [00:00<00:11, 65.97batch/s]
[grid_001] Epoch 1 Training:   6%|â–‹         | 50/782 [00:00<00:11, 65.97batch/s, Loss: 2.3411]
[grid_001] Epoch 1 Training:  13%|â–ˆâ–        | 100/782 [00:01<00:08, 76.04batch/s, Loss: 2.1947]
[grid_001] Epoch 1 Training:  19%|â–ˆâ–‰        | 150/782 [00:01<00:07, 79.94batch/s, Loss: 1.8935]
...
[grid_001] Epoch 1 Training: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 782/782 [00:09<00:00, 82.57batch/s, Loss: 0.7529]
[grid_001] Epoch 1 Testing:   0%|          | 0/157 [00:00<?, ?batch/s]
[grid_001] Epoch 1 Testing:  15%|â–ˆâ–        | 23/157 [00:00<00:01, 83.19batch/s]
[grid_001] Epoch 1 Testing:  31%|â–ˆâ–ˆâ–ˆ       | 48/157 [00:00<00:00, 140.13batch/s]
...
[grid_001] Epoch 1 Testing: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 157/157 [00:00<00:00, 162.00batch/s]
[grid_001] Epoch 1 - Test Loss: 0.6405, Accuracy: 77.40%
[grid_001] æ–°æœ€ä½³å‡†ç¡®ç‡: 77.40%
```

### å…³é”®ç‰¹æ€§
1. **å®æ—¶è¿›åº¦æ¡**ï¼šæ˜¾ç¤ºè®­ç»ƒå’Œæµ‹è¯•çš„å®æ—¶è¿›åº¦
2. **è¯¦ç»†ä¿¡æ¯**ï¼šåŒ…å«ç™¾åˆ†æ¯”ã€è¿›åº¦æ¡ã€batchæ•°é‡ã€é€Ÿåº¦å’Œå½“å‰æŸå¤±
3. **åŒè¡Œåˆ·æ–°**ï¼šè¿›åº¦æ¡åœ¨åŒä¸€è¡Œæ›´æ–°ï¼ŒèŠ‚çœå±å¹•ç©ºé—´
4. **å…³é”®ä¿¡æ¯ä¿ç•™**ï¼šepochç»“æœã€å‡†ç¡®ç‡ç­‰é‡è¦ä¿¡æ¯æ­£å¸¸æ˜¾ç¤º

## ğŸ”§ æµ‹è¯•å‘½ä»¤

### å•å¡ç½‘æ ¼æœç´¢
```bash
python scripts/grid_search.py --config config/grid.yaml --max_experiments 5
```

### å¤šå¡ç½‘æ ¼æœç´¢
```bash
python scripts/grid_search.py --config config/grid.yaml --multi_gpu --max_experiments 5
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### âœ… å•å¡æµ‹è¯•
- è¿›åº¦æ¡æ­£å¸¸æ˜¾ç¤º âœ…
- è®­ç»ƒä¿¡æ¯å®Œæ•´ âœ…
- ç»“æœç»Ÿè®¡æ­£ç¡® âœ…

### âœ… å¤šå¡æµ‹è¯•
- è¿›åº¦æ¡æ­£å¸¸æ˜¾ç¤º âœ…
- å¤šå¡è®­ç»ƒæ­£å¸¸ âœ…
- ç»“æœç»Ÿè®¡æ­£ç¡® âœ…

### âœ… å¤šå®éªŒæµ‹è¯•
- å¤šä¸ªå®éªŒä¾æ¬¡æ‰§è¡Œ âœ…
- æ¯ä¸ªå®éªŒéƒ½æ˜¾ç¤ºè¿›åº¦æ¡ âœ…
- æœ€ç»ˆç»“æœæ±‡æ€»æ­£ç¡® âœ…

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

1. **å®æ—¶æ˜¾ç¤º**ï¼šä½¿ç”¨`subprocess.Popen`æ›¿ä»£`subprocess.run`ï¼Œå®ç°å®æ—¶è¾“å‡º
2. **è¿›åº¦æ¡ä¿ç•™**ï¼šç‰¹åˆ«å¤„ç†tqdmè¿›åº¦æ¡ï¼Œä½¿å…¶èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤º
3. **åŒè¡Œåˆ·æ–°**ï¼šä½¿ç”¨`\r`å®ç°è¿›åº¦æ¡çš„åŒè¡Œåˆ·æ–°æ•ˆæœ
4. **ä¿¡æ¯è¿‡æ»¤**ï¼šåªæ˜¾ç¤ºå…³é”®ä¿¡æ¯ï¼Œé¿å…è¾“å‡ºè¿‡äºå†—é•¿
5. **é”™è¯¯å¤„ç†**ï¼šä¿æŒåŸæœ‰çš„è¶…æ—¶å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶

## ğŸ‰ æ€»ç»“

ç°åœ¨ç½‘æ ¼æœç´¢åŠŸèƒ½å·²ç»å®Œå…¨ä¿®å¤ï¼š

- âœ… **tqdmè¿›åº¦æ¡æ˜¾ç¤º**ï¼šæ¯ä¸ªepochéƒ½èƒ½çœ‹åˆ°å®æ—¶çš„è®­ç»ƒå’Œæµ‹è¯•è¿›åº¦
- âœ… **å®æ—¶æ›´æ–°**ï¼šè¿›åº¦æ¡ä¼šå®æ—¶æ›´æ–°ï¼Œæ˜¾ç¤ºå½“å‰çŠ¶æ€
- âœ… **ä¿¡æ¯å®Œæ•´**ï¼šä¿ç•™æ‰€æœ‰é‡è¦çš„è®­ç»ƒä¿¡æ¯å’Œç»“æœ
- âœ… **å¤šå¡æ”¯æŒ**ï¼šå•å¡å’Œå¤šå¡è®­ç»ƒéƒ½æ­£å¸¸å·¥ä½œ
- âœ… **æ‰¹é‡å®éªŒ**ï¼šæ”¯æŒå¤šä¸ªå®éªŒçš„æ‰¹é‡æ‰§è¡Œ

ç”¨æˆ·ç°åœ¨å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸ªå®éªŒçš„è®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬ï¼š
- æ¯ä¸ªepochçš„è®­ç»ƒè¿›åº¦æ¡
- æ¯ä¸ªepochçš„æµ‹è¯•è¿›åº¦æ¡  
- å®æ—¶çš„æŸå¤±å€¼å’Œè®­ç»ƒé€Ÿåº¦
- æœ€ç»ˆçš„å‡†ç¡®ç‡å’Œæœ€ä½³ç»“æœ

è¿™å¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œè®©ç½‘æ ¼æœç´¢è¿‡ç¨‹æ›´åŠ é€æ˜å’Œå¯ç›‘æ§ï¼ğŸš€
